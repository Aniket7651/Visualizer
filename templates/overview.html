{% extends 'base.htm' %}

{% block title %}
Overview of {{ cancer_type }} Cancer in {{ country }}
{% endblock %}

{% load static %}
{% load customTagFilter %}

{% block content %}

<link rel="stylesheet" href="{% static 'admin/overview.css' %}">
<h1>Overview of {{ cancer_type }} Cancer in {{ country }}</h1>
<div class="container">
    <div class="text-content">
        <div class="box">
            <h2>Introduction</h2>
            <p>{{ introduction }}</p>
        </div>
        <div class="">
            <div id="mapchart"></div>

        </div>
    </div>
</div>
<div class="container">
    <div class="swot-content">
        <h2>SWOT Analysis: {{ cancer_type }} Cancer Care in {{ country }}</h2>
        <div class="swot-sections">
            <div class="swot-section">
                <h2>Strengths</h2>
                <ul>
                    {% for item in swot_analysis.Strengths %}
                    <li>{{ item }}</li>
                    {% endfor %}
                </ul>
            </div>
            <div class="swot-section">
                <h2>Weaknesses</h2>
                <ul>
                    {% for item in swot_analysis.Weaknesses %}
                    <li>{{ item }}</li>
                    {% endfor %}
                </ul>
            </div>
            <div class="swot-section">
                <h2>Opportunities</h2>
                <ul>
                    {% for item in swot_analysis.Opportunities %}
                    <li>{{ item }}</li>
                    {% endfor %}
                </ul>
            </div>
            <div class="swot-section">
                <h2>Threats</h2>
                <ul>
                    {% for item in swot_analysis.Threats %}
                    <li>{{ item }}</li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </div>
</div>
<div class="container">
    <div class="category"><img src="{% static 'admin/img/column.png' %}" alt="Infrastructure"> Infrastructure</div>
    {% for ikey, ival in infrastructure.items %}
        <div class="card">
            <h3>{{ ikey|str_replace:"_, " }}</h3>
            <p>{{ ival.score }}</p>
            <p class="score">{{ ival.disc }}</p>
        </div>
    {% endfor %}

    <div class="category"><img src="{% static 'admin/img/column.png' %}" alt="Infrastructure"> Survival, Early Detection
        & Palliative Care</div>
        {% for ikey, ival in survival_rates.items %}
            <div class="card">
                <h3>{{ ikey|str_replace:"_, " }}</h3>
                <p>{{ ival.score }}</p>
                <p class="score">{{ ival.disc }}</p>
            </div>
        {% endfor %}
    
    <div class="category"><img src="{% static 'admin/img/column.png' %}" alt="Infrastructure"> Treatment, Research &
        Awareness</div>
        {% for ikey, ival in treatment_funding_awareness.items %}
            <div class="card">
                <h3>{{ ikey|str_replace:"_, " }}</h3>
                <p>{{ ival.score }}</p>
                <p class="score">{{ ival.disc }}</p>
            </div>
        {% endfor %}

    <div class="category"><img src="{% static 'admin/img/column.png' %}" alt="Infrastructure"> Biomarker Utilization
    </div>
        {% for ikey, ival in biomarkers.items %}
            <div class="card">
                <h3>{{ ikey|str_replace:"_, " }}</h3>
                <p>{{ ival.score }}</p>
                <p class="score">{{ ival.disc }}</p>
            </div>
        {% endfor %}

    <div class="category"><img src="{% static 'admin/img/column.png' %}" alt="Infrastructure"> Clinical Guidelines</div>
        {% for ikey, ival in clinical_guidelines.items %}
            <div class="card">
                <h3>{{ ikey|str_replace:"_, " }}</h3>
                <p>{{ ival.score }}</p>
                <p class="score">{{ ival.disc }}</p>
            </div>
        {% endfor %}

    <div class="category"><img src="{% static 'admin/img/column.png' %}" alt="Infrastructure"> Reimbursement</div>
        {% for ikey, ival in reimbursement.items %}
            <div class="card">
                <h3>{{ ikey|str_replace:"_, " }}</h3>
                <p>{{ ival.score }}</p>
                <p class="score">{{ ival.disc }}</p>
            </div>
        {% endfor %}

    <div class="category"><img src="{% static 'admin/img/column.png' %}" alt="Infrastructure"> Screening</div>
        {% for ikey, ival in cancer_screening.items %}
            <div class="card">
                <h3>{{ ikey|str_replace:"_, " }}</h3>
                <p>{{ ival.score }}</p>
                <p class="score">{{ ival.disc }}</p>
            </div>
        {% endfor %}
</div>
<div class="feedback-section">
    <h2>Feedback & Collaboration</h2>
    <div class="feedback-box">
        <p>We welcome feedback on the data and insights presented here. Stakeholders from clinical, research, and policy
            communities are encouraged to share updates, best practices, or additional information to enrich the country
            profile. Please contact us to contribute or collaborate on future assessments.
        </p>
        <button>Provide Feedback</button>
    </div>
</div>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">
    google.charts.load('current', {
        'packages': ['geochart']
    });
    google.charts.setOnLoadCallback(drawRegionsMap);

    function drawRegionsMap() {
        var data = google.visualization.arrayToDataTable([
            ['Country', 'Popularity'],
            ['{{ country }}', 200]
        ]);

        var options = {
            region: '{{ country_shortForm }}',
            datalessRegionColor: 'transparent',
            defaultColor: 'transparent',
            colorAxis: {
                colors: ['#F6C646']
            },
            legend: 'none',
            tooltip: { trigger: 'none' },
        };

        var chart = new google.visualization.GeoChart(document.getElementById('mapchart'));

        chart.draw(data, options);
    }
</script>
{% endblock %}